\hypertarget{reactor_8h}{}\doxysection{/home/shaokai/lingua-\/franca-\/master/git/lingua-\/franca/org.lflang/src/lib/core/reactor.h File Reference}
\label{reactor_8h}\index{/home/shaokai/lingua-\/franca-\/master/git/lingua-\/franca/org.lflang/src/lib/core/reactor.h@{/home/shaokai/lingua-\/franca-\/master/git/lingua-\/franca/org.lflang/src/lib/core/reactor.h}}
{\ttfamily \#include $<$stdbool.\+h$>$}\newline
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$time.\+h$>$}\newline
{\ttfamily \#include $<$limits.\+h$>$}\newline
{\ttfamily \#include $<$errno.\+h$>$}\newline
{\ttfamily \#include \char`\"{}pqueue.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}util.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}tag.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}trace.\+h\char`\"{}}\newline
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structlf__token__t}{lf\+\_\+token\+\_\+t}}
\item 
struct \mbox{\hyperlink{structtoken__present__t}{token\+\_\+present\+\_\+t}}
\item 
struct \mbox{\hyperlink{structreaction__t}{reaction\+\_\+t}}
\item 
struct \mbox{\hyperlink{structevent__t}{event\+\_\+t}}
\item 
struct \mbox{\hyperlink{structtrigger__t}{trigger\+\_\+t}}
\end{DoxyCompactItemize}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{reactor_8h_a71bcdce172253c19667053352afdf496}\label{reactor_8h_a71bcdce172253c19667053352afdf496}} 
\#define {\bfseries C\+O\+N\+S\+T\+R\+U\+C\+T\+OR}(classname)~(new\+\_\+ \#\# classname)
\item 
\mbox{\Hypertarget{reactor_8h_ac783147cb265dcb8f2920def647037e0}\label{reactor_8h_ac783147cb265dcb8f2920def647037e0}} 
\#define {\bfseries S\+E\+L\+F\+\_\+\+S\+T\+R\+U\+C\+T\+\_\+T}(classname)~(classname \#\# \+\_\+self\+\_\+t)
\item 
\mbox{\Hypertarget{reactor_8h_a88789cadebf89616a6c179b429f64a72}\label{reactor_8h_a88789cadebf89616a6c179b429f64a72}} 
\#define {\bfseries I\+N\+I\+T\+I\+A\+L\+\_\+\+E\+V\+E\+N\+T\+\_\+\+Q\+U\+E\+U\+E\+\_\+\+S\+I\+ZE}~10
\item 
\mbox{\Hypertarget{reactor_8h_ab90a33a3249c67258eed6ac36793bd39}\label{reactor_8h_ab90a33a3249c67258eed6ac36793bd39}} 
\#define {\bfseries I\+N\+I\+T\+I\+A\+L\+\_\+\+R\+E\+A\+C\+T\+\_\+\+Q\+U\+E\+U\+E\+\_\+\+S\+I\+ZE}~10
\item 
\#define \mbox{\hyperlink{reactor_8h_af5f7e281be573bc680ed652ad54f5386}{\+\_\+\+L\+F\+\_\+\+S\+ET}}(out,  val)
\item 
\#define \mbox{\hyperlink{reactor_8h_a8a4001d12854ff4675f7d119dfb0b952}{\+\_\+\+L\+F\+\_\+\+S\+E\+T\+\_\+\+A\+R\+R\+AY}}(out,  val,  element\+\_\+size,  length)
\item 
\#define \mbox{\hyperlink{reactor_8h_ae6d69be73768b3d144a524fa87f0d069}{\+\_\+\+L\+F\+\_\+\+S\+E\+T\+\_\+\+N\+EW}}(out)
\item 
\#define \mbox{\hyperlink{reactor_8h_a64c4d124085ac4279bac7158ad144218}{\+\_\+\+L\+F\+\_\+\+S\+E\+T\+\_\+\+N\+E\+W\+\_\+\+A\+R\+R\+AY}}(out,  len)
\item 
\#define \mbox{\hyperlink{reactor_8h_a26960b6a12ebe9eff3f276c2b07096ab}{\+\_\+\+L\+F\+\_\+\+S\+E\+T\+\_\+\+P\+R\+E\+S\+E\+NT}}(out)
\item 
\#define \mbox{\hyperlink{reactor_8h_a5f45a70cbab4e36efdc9efdcf37a7bb9}{\+\_\+\+L\+F\+\_\+\+S\+E\+T\+\_\+\+T\+O\+K\+EN}}(out,  newtoken)
\item 
\#define \mbox{\hyperlink{reactor_8h_a4aab573132838d44997ee99002d3e6d0}{D\+E\+A\+D\+L\+I\+NE}}(index)~(index \& 0x7\+F\+F\+F\+F\+F\+F\+F\+F\+F\+F\+F0000)
\item 
\#define \mbox{\hyperlink{reactor_8h_a6d86a8b9f2059af4b3f9f1862fdb2145}{L\+E\+V\+EL}}(index)~(index \& 0x\+F\+F\+FF)
\item 
\#define \mbox{\hyperlink{reactor_8h_aff9931d7524c88e07743af6535b20761}{M\+AX}}(X,  Y)~(((X) $>$ (Y)) ? (X) \+: (Y))
\item 
\#define \mbox{\hyperlink{reactor_8h_ad2f3678bf5eae3684fc497130b946eae}{M\+IN}}(X,  Y)~(((X) $<$ (Y)) ? (X) \+: (Y))
\item 
\#define \mbox{\hyperlink{reactor_8h_a05ad7b5ea629e5f900ed750be8b1a357}{O\+V\+E\+R\+L\+A\+P\+P\+I\+NG}}(chain1,  chain2)~((chain1 \& chain2) != 0)
\item 
\#define \mbox{\hyperlink{reactor_8h_a20b6cff12498f2db056084f86154d9a4}{O\+K\+\_\+\+T\+O\+\_\+\+F\+R\+EE}}~token\+\_\+and\+\_\+value
\end{DoxyCompactItemize}
\doxysubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef unsigned short int \mbox{\hyperlink{reactor_8h_a3fa7784c89589b49764048e9909d0e07}{ushort}}
\item 
typedef int \mbox{\hyperlink{reactor_8h_a5ad7d32f3a1ddabdc2933223ca6ce2ea}{handle\+\_\+t}}
\item 
typedef char $\ast$ \mbox{\hyperlink{reactor_8h_a4505c08c065b48840a30eedd9845cce2}{string}}
\item 
typedef \mbox{\hyperlink{pqueue_8h_ad8239ddc32134716f57e54bb972f6bf0}{pqueue\+\_\+pri\+\_\+t}} \mbox{\hyperlink{reactor_8h_a4448d06be794d3f5412d0edb412dc00e}{index\+\_\+t}}
\item 
typedef void($\ast$ \mbox{\hyperlink{reactor_8h_a149e5fee1c1841bcc96c72f200601d90}{reaction\+\_\+function\+\_\+t}}) (void $\ast$)
\item 
typedef struct \mbox{\hyperlink{structtrigger__t}{trigger\+\_\+t}} \mbox{\hyperlink{reactor_8h_ae98c19a4a03c495fdd3044c206e99afc}{trigger\+\_\+t}}
\item 
typedef struct \mbox{\hyperlink{structlf__token__t}{lf\+\_\+token\+\_\+t}} \mbox{\hyperlink{reactor_8h_a973e404c4c1bd798a54501d0e1d640f9}{lf\+\_\+token\+\_\+t}}
\item 
typedef struct \mbox{\hyperlink{structtoken__present__t}{token\+\_\+present\+\_\+t}} \mbox{\hyperlink{reactor_8h_a2c506d193748554de2ff32e5f7cee41e}{token\+\_\+present\+\_\+t}}
\item 
typedef struct \mbox{\hyperlink{structreaction__t}{reaction\+\_\+t}} \mbox{\hyperlink{reactor_8h_a1f0f71b6c8e0c54c65cbfaa154b40694}{reaction\+\_\+t}}
\item 
typedef struct \mbox{\hyperlink{structevent__t}{event\+\_\+t}} \mbox{\hyperlink{reactor_8h_a59f5f6b9c6023baebf9c49c328b639a1}{event\+\_\+t}}
\end{DoxyCompactItemize}
\doxysubsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \mbox{\hyperlink{reactor_8h_a0183c0b43037a172a1cd9aa6ed6b3822}{lf\+\_\+spacing\+\_\+policy\+\_\+t}} \{ {\bfseries defer}, 
{\bfseries drop}, 
{\bfseries replace}
 \}
\item 
\mbox{\Hypertarget{reactor_8h_a174f339edecd4463df25e673366a2b16}\label{reactor_8h_a174f339edecd4463df25e673366a2b16}} 
enum {\bfseries ok\+\_\+to\+\_\+free\+\_\+t} \{ {\bfseries no} =0, 
{\bfseries token\+\_\+and\+\_\+value}, 
{\bfseries token\+\_\+only}
 \}
\item 
enum \mbox{\hyperlink{reactor_8h_a759ba374f75ea0025b9af1bb35f14d7e}{port\+\_\+status\+\_\+t}} \{ {\bfseries absent} = false, 
{\bfseries present} = true, 
{\bfseries unknown}
 \}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{tag_8h_ad740f3189d2a477285138e682eafa8c5}{instant\+\_\+t}} \mbox{\hyperlink{reactor_8h_a8b4f2e4e87e43670217c0c53099ae2f5}{get\+\_\+start\+\_\+time}} ()
\item 
\mbox{\hyperlink{tag_8h_a181bf532390385b9092615f354cccf87}{interval\+\_\+t}} \mbox{\hyperlink{reactor_8h_a54be08fbc7990c2d8082a31cbbf6e019}{get\+\_\+stp\+\_\+offset}} ()
\item 
void \mbox{\hyperlink{reactor_8h_a75a5bf324229d35fb88541a04449c95b}{set\+\_\+stp\+\_\+offset}} (\mbox{\hyperlink{tag_8h_a181bf532390385b9092615f354cccf87}{interval\+\_\+t}} offset)
\item 
void \mbox{\hyperlink{reactor_8h_ad96dc6cbe1d3365e52aad6aecbf036d8}{print\+\_\+snapshot}} ()
\item 
void \mbox{\hyperlink{reactor_8h_af629769c213699f0e4c9360811ee7251}{request\+\_\+stop}} ()
\item 
void \mbox{\hyperlink{reactor_8h_aedbba6d4986cc6d46b07d53d3752270f}{\+\_\+\+\_\+set\+\_\+default\+\_\+command\+\_\+line\+\_\+options}} ()
\item 
void \mbox{\hyperlink{reactor_8h_af8aacf433fcf349ffa1b163962eb3681}{\+\_\+\+\_\+start\+\_\+time\+\_\+step}} ()
\item 
void \mbox{\hyperlink{reactor_8h_a868e02a04eabb4ffed63f6141f5f64a2}{\+\_\+\+\_\+initialize\+\_\+trigger\+\_\+objects}} ()
\item 
void \mbox{\hyperlink{reactor_8h_a1825238bcb81ecc6aeeb6dd42d308089}{\+\_\+\+\_\+pop\+\_\+events}} ()
\item 
\mbox{\hyperlink{reactor_8h_a5ad7d32f3a1ddabdc2933223ca6ce2ea}{handle\+\_\+t}} \mbox{\hyperlink{reactor_8h_a1b914dafd583948c817b0ae6ce739b6d}{\+\_\+\+\_\+schedule}} (\mbox{\hyperlink{structtrigger__t}{trigger\+\_\+t}} $\ast$trigger, \mbox{\hyperlink{tag_8h_a181bf532390385b9092615f354cccf87}{interval\+\_\+t}} delay, \mbox{\hyperlink{structlf__token__t}{lf\+\_\+token\+\_\+t}} $\ast$token)
\item 
void \mbox{\hyperlink{reactor_8h_ae3c5c84c6f22c1bdf98af8b1a55a9f4b}{\+\_\+\+\_\+initialize\+\_\+timers}} ()
\item 
void \mbox{\hyperlink{reactor_8h_a1d807ba211ee2edb588750d4553090c1}{\+\_\+\+\_\+trigger\+\_\+startup\+\_\+reactions}} ()
\item 
void \mbox{\hyperlink{reactor_8h_a114c79dc673219d5df3b794552ca88d7}{terminate\+\_\+execution}} ()
\item 
bool \mbox{\hyperlink{reactor_8h_a9ea1110b1a18ccf10931bf5f9adaf299}{\+\_\+\+\_\+trigger\+\_\+shutdown\+\_\+reactions}} ()
\item 
\mbox{\hyperlink{structlf__token__t}{lf\+\_\+token\+\_\+t}} $\ast$ \mbox{\hyperlink{reactor_8h_a9d8ea5bc3ac4d18edafab309bc2a9c8a}{create\+\_\+token}} (size\+\_\+t element\+\_\+size)
\item 
\mbox{\hyperlink{reactor_8h_a5ad7d32f3a1ddabdc2933223ca6ce2ea}{handle\+\_\+t}} \mbox{\hyperlink{reactor_8h_aa715873b79dee5b9f50daa2fef88cf34}{\+\_\+lf\+\_\+schedule\+\_\+int}} (void $\ast$action, \mbox{\hyperlink{tag_8h_a181bf532390385b9092615f354cccf87}{interval\+\_\+t}} extra\+\_\+delay, int value)
\item 
\mbox{\hyperlink{structevent__t}{event\+\_\+t}} $\ast$ \mbox{\hyperlink{reactor_8h_a116897d2fd982e8836d2118af641b575}{\+\_\+lf\+\_\+get\+\_\+new\+\_\+event}} ()
\item 
void \mbox{\hyperlink{reactor_8h_a662cfd5714e5930f5e1c880f13deba6d}{\+\_\+lf\+\_\+recycle\+\_\+event}} (\mbox{\hyperlink{structevent__t}{event\+\_\+t}} $\ast$e)
\item 
int \mbox{\hyperlink{reactor_8h_af1f3a3c4613102e28fc0105408731c5e}{\+\_\+lf\+\_\+schedule\+\_\+at\+\_\+tag}} (\mbox{\hyperlink{structtrigger__t}{trigger\+\_\+t}} $\ast$trigger, \mbox{\hyperlink{structtag__t}{tag\+\_\+t}} tag, \mbox{\hyperlink{structlf__token__t}{lf\+\_\+token\+\_\+t}} $\ast$token)
\item 
\mbox{\hyperlink{structevent__t}{event\+\_\+t}} $\ast$ \mbox{\hyperlink{reactor_8h_aed87bffa17d8c4ac396b288ba4c0c88b}{\+\_\+lf\+\_\+create\+\_\+dummy\+\_\+event}} (\mbox{\hyperlink{structtrigger__t}{trigger\+\_\+t}} $\ast$trigger, \mbox{\hyperlink{tag_8h_ad740f3189d2a477285138e682eafa8c5}{instant\+\_\+t}} time, \mbox{\hyperlink{structevent__t}{event\+\_\+t}} $\ast$next, unsigned int offset)
\item 
\mbox{\hyperlink{reactor_8h_a5ad7d32f3a1ddabdc2933223ca6ce2ea}{handle\+\_\+t}} \mbox{\hyperlink{reactor_8h_a369700b5e0906335f3d304a67eec5f29}{\+\_\+lf\+\_\+schedule\+\_\+token}} (void $\ast$action, \mbox{\hyperlink{tag_8h_a181bf532390385b9092615f354cccf87}{interval\+\_\+t}} extra\+\_\+delay, \mbox{\hyperlink{structlf__token__t}{lf\+\_\+token\+\_\+t}} $\ast$token)
\item 
\mbox{\hyperlink{reactor_8h_a5ad7d32f3a1ddabdc2933223ca6ce2ea}{handle\+\_\+t}} \mbox{\hyperlink{reactor_8h_aa0a09f1dc9ee5870a6d225a3569388df}{\+\_\+lf\+\_\+schedule\+\_\+value}} (void $\ast$action, \mbox{\hyperlink{tag_8h_a181bf532390385b9092615f354cccf87}{interval\+\_\+t}} extra\+\_\+delay, void $\ast$value, int length)
\item 
\mbox{\hyperlink{reactor_8h_a5ad7d32f3a1ddabdc2933223ca6ce2ea}{handle\+\_\+t}} \mbox{\hyperlink{reactor_8h_a2c07a7b9e616070f32fa88b4959fba53}{\+\_\+lf\+\_\+schedule\+\_\+copy}} (void $\ast$action, \mbox{\hyperlink{tag_8h_a181bf532390385b9092615f354cccf87}{interval\+\_\+t}} offset, void $\ast$value, int length)
\item 
void \mbox{\hyperlink{reactor_8h_a60ec02f52c1a7db4c7bdbc2871eae636}{\+\_\+lf\+\_\+fd\+\_\+send\+\_\+stop\+\_\+request\+\_\+to\+\_\+rti}} ()
\item 
void \mbox{\hyperlink{reactor_8h_abadead0c4f54963b062503cf6cb7ace7}{\+\_\+lf\+\_\+advance\+\_\+logical\+\_\+time}} (\mbox{\hyperlink{tag_8h_ad740f3189d2a477285138e682eafa8c5}{instant\+\_\+t}} next\+\_\+time)
\item 
void \mbox{\hyperlink{reactor_8h_aa46a83ed702e2c83d42625a8c78a9f50}{\+\_\+lf\+\_\+notify\+\_\+workers}} ()
\item 
bool \mbox{\hyperlink{reactor_8h_ab461661c6c9757862959540fe57e3554}{\+\_\+lf\+\_\+is\+\_\+blocked\+\_\+by\+\_\+executing\+\_\+reaction}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{tag_8h_a181bf532390385b9092615f354cccf87}{interval\+\_\+t}} \mbox{\hyperlink{reactor_8h_a39f588e1df453139dbb9a4157dda2027}{\+\_\+lf\+\_\+global\+\_\+time\+\_\+\+S\+T\+P\+\_\+offset}}
\item 
unsigned int \mbox{\hyperlink{reactor_8h_af74a2782bda0d66298d22d637ad964b5}{\+\_\+lf\+\_\+number\+\_\+of\+\_\+threads}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\begin{DoxyAuthor}{Author}
Edward A. Lee (\href{mailto:eal@berkeley.edu}{\texttt{ eal@berkeley.\+edu}}) 

Marten Lohstroh (\href{mailto:marten@berkeley.edu}{\texttt{ marten@berkeley.\+edu}}) 

Chris Gill (\href{mailto:cdgill@wustl.edu}{\texttt{ cdgill@wustl.\+edu}}) 

Mehrdad Niknami (\href{mailto:mniknami@berkeley.edu}{\texttt{ mniknami@berkeley.\+edu}})
\end{DoxyAuthor}
\hypertarget{util_8h_LICENSE}{}\doxysubsection{L\+I\+C\+E\+N\+SE}\label{util_8h_LICENSE}
Copyright (c) 2019, The University of California at Berkeley.

Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met\+:


\begin{DoxyEnumerate}
\item Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
\item Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
\end{DoxyEnumerate}

T\+H\+IS S\+O\+F\+T\+W\+A\+RE IS P\+R\+O\+V\+I\+D\+ED BY T\+HE C\+O\+P\+Y\+R\+I\+G\+HT H\+O\+L\+D\+E\+RS A\+ND C\+O\+N\+T\+R\+I\+B\+U\+T\+O\+RS \char`\"{}\+A\+S I\+S\char`\"{} A\+ND A\+NY E\+X\+P\+R\+E\+SS OR I\+M\+P\+L\+I\+ED W\+A\+R\+R\+A\+N\+T\+I\+ES, I\+N\+C\+L\+U\+D\+I\+NG, B\+UT N\+OT L\+I\+M\+I\+T\+ED TO, T\+HE I\+M\+P\+L\+I\+ED W\+A\+R\+R\+A\+N\+T\+I\+ES OF M\+E\+R\+C\+H\+A\+N\+T\+A\+B\+I\+L\+I\+TY A\+ND F\+I\+T\+N\+E\+SS F\+OR A P\+A\+R\+T\+I\+C\+U\+L\+AR P\+U\+R\+P\+O\+SE A\+RE D\+I\+S\+C\+L\+A\+I\+M\+ED. IN NO E\+V\+E\+NT S\+H\+A\+LL T\+HE C\+O\+P\+Y\+R\+I\+G\+HT H\+O\+L\+D\+ER OR C\+O\+N\+T\+R\+I\+B\+U\+T\+O\+RS BE L\+I\+A\+B\+LE F\+OR A\+NY D\+I\+R\+E\+CT, I\+N\+D\+I\+R\+E\+CT, I\+N\+C\+I\+D\+E\+N\+T\+AL, S\+P\+E\+C\+I\+AL, E\+X\+E\+M\+P\+L\+A\+RY, OR C\+O\+N\+S\+E\+Q\+U\+E\+N\+T\+I\+AL D\+A\+M\+A\+G\+ES (I\+N\+C\+L\+U\+D\+I\+NG, B\+UT N\+OT L\+I\+M\+I\+T\+ED TO, P\+R\+O\+C\+U\+R\+E\+M\+E\+NT OF S\+U\+B\+S\+T\+I\+T\+U\+TE G\+O\+O\+DS OR S\+E\+R\+V\+I\+C\+ES; L\+O\+SS OF U\+SE, D\+A\+TA, OR P\+R\+O\+F\+I\+TS; OR B\+U\+S\+I\+N\+E\+SS I\+N\+T\+E\+R\+R\+U\+P\+T\+I\+ON) H\+O\+W\+E\+V\+ER C\+A\+U\+S\+ED A\+ND ON A\+NY T\+H\+E\+O\+RY OF L\+I\+A\+B\+I\+L\+I\+TY, W\+H\+E\+T\+H\+ER IN C\+O\+N\+T\+R\+A\+CT, S\+T\+R\+I\+CT L\+I\+A\+B\+I\+L\+I\+TY, OR T\+O\+RT (I\+N\+C\+L\+U\+D\+I\+NG N\+E\+G\+L\+I\+G\+E\+N\+CE OR O\+T\+H\+E\+R\+W\+I\+SE) A\+R\+I\+S\+I\+NG IN A\+NY W\+AY O\+UT OF T\+HE U\+SE OF T\+H\+IS S\+O\+F\+T\+W\+A\+RE, E\+V\+EN IF A\+D\+V\+I\+S\+ED OF T\+HE P\+O\+S\+S\+I\+B\+I\+L\+I\+TY OF S\+U\+CH D\+A\+M\+A\+GE.\hypertarget{util_8h_DESCRIPTION}{}\doxysubsection{D\+E\+S\+C\+R\+I\+P\+T\+I\+ON}\label{util_8h_DESCRIPTION}
Header file for the infrastructure for the C target of Lingua Franca. This file contains header information used by both the threaded and non-\/threaded versions of the C runtime. A generated C program will have either \#include reactor.\+c or \#include reactor\+\_\+threaded.\+c. Those two files \#include this header file.

This header file defines the functions and macros that programmers use in the body of reactions for reading and writing inputs and outputs and scheduling future events. The LF compiler does not parse that C code. This fact strongly affects the design.

The intent of the C target for Lingua Franca not to provide a safe programming environment (The C++ and Type\+Script targets are better choices for that), but rather to find the lowest possible overhead implementation of Lingua Franca. The A\+PI herein can easily be misused, leading to memory leaks, nondeterminism, or program crashes. 

\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{reactor_8h_af5f7e281be573bc680ed652ad54f5386}\label{reactor_8h_af5f7e281be573bc680ed652ad54f5386}} 
\index{reactor.h@{reactor.h}!\_LF\_SET@{\_LF\_SET}}
\index{\_LF\_SET@{\_LF\_SET}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{\_LF\_SET}{\_LF\_SET}}
{\footnotesize\ttfamily \#define \+\_\+\+L\+F\+\_\+\+S\+ET(\begin{DoxyParamCaption}\item[{}]{out,  }\item[{}]{val }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordflow}{do} \{ \(\backslash\)}
\DoxyCodeLine{    out-\/>value = val; \(\backslash\)}
\DoxyCodeLine{    out-\/>is\_present = \textcolor{keyword}{true}; \(\backslash\)}
\DoxyCodeLine{\} \textcolor{keywordflow}{while}(0)}

\end{DoxyCode}
Set the specified output (or input of a contained reactor) to the specified value.

This version is used for primitive types such as int, double, etc. as well as the built-\/in types bool and string. The value is copied and therefore the variable carrying the value can be subsequently modified without changing the output. This can also be used for structs with a type defined by a typedef so that the type designating string does not end in \textquotesingle{}$\ast$\textquotesingle{}. 
\begin{DoxyParams}{Parameters}
{\em out} & The output port (by name) or input of a contained reactor in form input\+\_\+name.\+port\+\_\+name. \\
\hline
{\em value} & The value to insert into the self struct. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{reactor_8h_a8a4001d12854ff4675f7d119dfb0b952}\label{reactor_8h_a8a4001d12854ff4675f7d119dfb0b952}} 
\index{reactor.h@{reactor.h}!\_LF\_SET\_ARRAY@{\_LF\_SET\_ARRAY}}
\index{\_LF\_SET\_ARRAY@{\_LF\_SET\_ARRAY}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{\_LF\_SET\_ARRAY}{\_LF\_SET\_ARRAY}}
{\footnotesize\ttfamily \#define \+\_\+\+L\+F\+\_\+\+S\+E\+T\+\_\+\+A\+R\+R\+AY(\begin{DoxyParamCaption}\item[{}]{out,  }\item[{}]{val,  }\item[{}]{element\+\_\+size,  }\item[{}]{length }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordflow}{do} \{ \(\backslash\)}
\DoxyCodeLine{    out-\/>is\_present = \textcolor{keyword}{true}; \(\backslash\)}
\DoxyCodeLine{    lf\_token\_t* token = \_\_initialize\_token\_with\_value(out-\/>token, val, length); \(\backslash\)}
\DoxyCodeLine{    token-\/>ref\_count = out-\/>num\_destinations; \(\backslash\)}
\DoxyCodeLine{    out-\/>token = token; \(\backslash\)}
\DoxyCodeLine{    out-\/>value = token-\/>value; \(\backslash\)}
\DoxyCodeLine{\} \textcolor{keywordflow}{while}(0)}

\end{DoxyCode}
Version of set for output types given as \textquotesingle{}type\mbox{[}\mbox{]}\textquotesingle{} where you want to send a previously dynamically allocated array.

The deallocation is delegated to downstream reactors, which automatically deallocate when the reference count drops to zero. It also sets the corresponding \+\_\+is\+\_\+present variable in the self struct to true (which causes the object message to be sent). 
\begin{DoxyParams}{Parameters}
{\em out} & The output port (by name). \\
\hline
{\em val} & The array to send (a pointer to the first element). \\
\hline
{\em length} & The length of the array to send. \\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{structlf__token__t}{lf\+\_\+token\+\_\+t}} 
\end{DoxySeeAlso}
\mbox{\Hypertarget{reactor_8h_ae6d69be73768b3d144a524fa87f0d069}\label{reactor_8h_ae6d69be73768b3d144a524fa87f0d069}} 
\index{reactor.h@{reactor.h}!\_LF\_SET\_NEW@{\_LF\_SET\_NEW}}
\index{\_LF\_SET\_NEW@{\_LF\_SET\_NEW}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{\_LF\_SET\_NEW}{\_LF\_SET\_NEW}}
{\footnotesize\ttfamily \#define \+\_\+\+L\+F\+\_\+\+S\+E\+T\+\_\+\+N\+EW(\begin{DoxyParamCaption}\item[{}]{out }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordflow}{do} \{ \(\backslash\)}
\DoxyCodeLine{    out-\/>is\_present = \textcolor{keyword}{true}; \(\backslash\)}
\DoxyCodeLine{    lf\_token\_t* token = \_\_set\_new\_array\_impl(out-\/>token, 1, out-\/>num\_destinations); \(\backslash\)}
\DoxyCodeLine{    out-\/>value = token-\/>value; \(\backslash\)}
\DoxyCodeLine{    out-\/>token = token; \(\backslash\)}
\DoxyCodeLine{\} \textcolor{keywordflow}{while}(0)}

\end{DoxyCode}
Version of set() for output types given as \textquotesingle{}type$\ast$\textquotesingle{} that allocates a new object of the type of the specified output port.

This macro dynamically allocates enough memory to contain one instance of the output datatype and sets the variable named by the argument to point to the newly allocated memory. The user code can then populate it with whatever value it wishes to send.

This macro also sets the corresponding \+\_\+is\+\_\+present variable in the self struct to true (which causes the object message to be sent), 
\begin{DoxyParams}{Parameters}
{\em out} & The output port (by name). \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{reactor_8h_a64c4d124085ac4279bac7158ad144218}\label{reactor_8h_a64c4d124085ac4279bac7158ad144218}} 
\index{reactor.h@{reactor.h}!\_LF\_SET\_NEW\_ARRAY@{\_LF\_SET\_NEW\_ARRAY}}
\index{\_LF\_SET\_NEW\_ARRAY@{\_LF\_SET\_NEW\_ARRAY}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{\_LF\_SET\_NEW\_ARRAY}{\_LF\_SET\_NEW\_ARRAY}}
{\footnotesize\ttfamily \#define \+\_\+\+L\+F\+\_\+\+S\+E\+T\+\_\+\+N\+E\+W\+\_\+\+A\+R\+R\+AY(\begin{DoxyParamCaption}\item[{}]{out,  }\item[{}]{len }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordflow}{do} \{ \(\backslash\)}
\DoxyCodeLine{    out-\/>is\_present = \textcolor{keyword}{true}; \(\backslash\)}
\DoxyCodeLine{    lf\_token\_t* token = \_\_set\_new\_array\_impl(out-\/>token, len, out-\/>num\_destinations); \(\backslash\)}
\DoxyCodeLine{    out-\/>value = token-\/>value; \(\backslash\)}
\DoxyCodeLine{    out-\/>token = token; \(\backslash\)}
\DoxyCodeLine{    out-\/>length = len; \(\backslash\)}
\DoxyCodeLine{\} \textcolor{keywordflow}{while}(0)}

\end{DoxyCode}
Version of set() for output types given as \textquotesingle{}type\mbox{[}\mbox{]}\textquotesingle{}.

This allocates a new array of the specified length, sets the corresponding \+\_\+is\+\_\+present variable in the self struct to true (which causes the array message to be sent), and sets the variable given by the first argument to point to the new array so that the user code can populate the array. The freeing of the dynamically allocated array will be handled automatically when the last downstream reader of the message has finished. 
\begin{DoxyParams}{Parameters}
{\em out} & The output port (by name). \\
\hline
{\em length} & The length of the array to be sent. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{reactor_8h_a26960b6a12ebe9eff3f276c2b07096ab}\label{reactor_8h_a26960b6a12ebe9eff3f276c2b07096ab}} 
\index{reactor.h@{reactor.h}!\_LF\_SET\_PRESENT@{\_LF\_SET\_PRESENT}}
\index{\_LF\_SET\_PRESENT@{\_LF\_SET\_PRESENT}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{\_LF\_SET\_PRESENT}{\_LF\_SET\_PRESENT}}
{\footnotesize\ttfamily \#define \+\_\+\+L\+F\+\_\+\+S\+E\+T\+\_\+\+P\+R\+E\+S\+E\+NT(\begin{DoxyParamCaption}\item[{}]{out }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordflow}{do} \{ \(\backslash\)}
\DoxyCodeLine{    out-\/>is\_present = \textcolor{keyword}{true}; \(\backslash\)}
\DoxyCodeLine{\} \textcolor{keywordflow}{while}(0)}

\end{DoxyCode}
Version of set() for output types given as \textquotesingle{}type\mbox{[}number\mbox{]}\textquotesingle{}.

This sets the \+\_\+is\+\_\+present variable corresponding to the specified output to true (which causes the array message to be sent). The values in the output are normally written directly to the array or struct before or after this is called. 
\begin{DoxyParams}{Parameters}
{\em out} & The output port (by name). \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{reactor_8h_a5f45a70cbab4e36efdc9efdcf37a7bb9}\label{reactor_8h_a5f45a70cbab4e36efdc9efdcf37a7bb9}} 
\index{reactor.h@{reactor.h}!\_LF\_SET\_TOKEN@{\_LF\_SET\_TOKEN}}
\index{\_LF\_SET\_TOKEN@{\_LF\_SET\_TOKEN}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{\_LF\_SET\_TOKEN}{\_LF\_SET\_TOKEN}}
{\footnotesize\ttfamily \#define \+\_\+\+L\+F\+\_\+\+S\+E\+T\+\_\+\+T\+O\+K\+EN(\begin{DoxyParamCaption}\item[{}]{out,  }\item[{}]{newtoken }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordflow}{do} \{ \(\backslash\)}
\DoxyCodeLine{    out-\/>is\_present = \textcolor{keyword}{true}; \(\backslash\)}
\DoxyCodeLine{    out-\/>value = newtoken-\/>value; \(\backslash\)}
\DoxyCodeLine{    out-\/>token = newtoken; \(\backslash\)}
\DoxyCodeLine{    newtoken-\/>ref\_count += out-\/>num\_destinations; \(\backslash\)}
\DoxyCodeLine{    out-\/>is\_present = \textcolor{keyword}{true}; \(\backslash\)}
\DoxyCodeLine{    out-\/>length = newtoken-\/>length; \(\backslash\)}
\DoxyCodeLine{\} \textcolor{keywordflow}{while}(0)}

\end{DoxyCode}
Version of set() for output types given as \textquotesingle{}type$\ast$\textquotesingle{} or \textquotesingle{}type\mbox{[}\mbox{]}\textquotesingle{} where you want to forward an input or action without copying it.

The deallocation of memory is delegated to downstream reactors, which automatically deallocate when the reference count drops to zero. 
\begin{DoxyParams}{Parameters}
{\em out} & The output port (by name). \\
\hline
{\em token} & A pointer to token obtained from an input or action. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{reactor_8h_a4aab573132838d44997ee99002d3e6d0}\label{reactor_8h_a4aab573132838d44997ee99002d3e6d0}} 
\index{reactor.h@{reactor.h}!DEADLINE@{DEADLINE}}
\index{DEADLINE@{DEADLINE}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{DEADLINE}{DEADLINE}}
{\footnotesize\ttfamily \#define D\+E\+A\+D\+L\+I\+NE(\begin{DoxyParamCaption}\item[{}]{index }\end{DoxyParamCaption})~(index \& 0x7\+F\+F\+F\+F\+F\+F\+F\+F\+F\+F\+F0000)}

Macro for extracting the deadline from the index of a reaction. The reaction queue is sorted according to this index, and the use of the deadline here results in an earliest deadline first (E\+DF) scheduling poicy. \mbox{\Hypertarget{reactor_8h_a6d86a8b9f2059af4b3f9f1862fdb2145}\label{reactor_8h_a6d86a8b9f2059af4b3f9f1862fdb2145}} 
\index{reactor.h@{reactor.h}!LEVEL@{LEVEL}}
\index{LEVEL@{LEVEL}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{LEVEL}{LEVEL}}
{\footnotesize\ttfamily \#define L\+E\+V\+EL(\begin{DoxyParamCaption}\item[{}]{index }\end{DoxyParamCaption})~(index \& 0x\+F\+F\+FF)}

Macro for extracting the level from the index of a reaction. A reaction that has no upstream reactions has level 0. Other reactions have a level that is the length of the longest upstream chain to a reaction with level 0 (inclusive). This is used, along with the deadline, to sort reactions in the reaction queue. It ensures that reactions that are upstream in the dependence graph execute before reactions that are downstream. \mbox{\Hypertarget{reactor_8h_aff9931d7524c88e07743af6535b20761}\label{reactor_8h_aff9931d7524c88e07743af6535b20761}} 
\index{reactor.h@{reactor.h}!MAX@{MAX}}
\index{MAX@{MAX}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{MAX}{MAX}}
{\footnotesize\ttfamily \#define M\+AX(\begin{DoxyParamCaption}\item[{}]{X,  }\item[{}]{Y }\end{DoxyParamCaption})~(((X) $>$ (Y)) ? (X) \+: (Y))}

Utility for finding the maximum of two values. \mbox{\Hypertarget{reactor_8h_ad2f3678bf5eae3684fc497130b946eae}\label{reactor_8h_ad2f3678bf5eae3684fc497130b946eae}} 
\index{reactor.h@{reactor.h}!MIN@{MIN}}
\index{MIN@{MIN}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{MIN}{MIN}}
{\footnotesize\ttfamily \#define M\+IN(\begin{DoxyParamCaption}\item[{}]{X,  }\item[{}]{Y }\end{DoxyParamCaption})~(((X) $<$ (Y)) ? (X) \+: (Y))}

Utility for finding the minimum of two values. \mbox{\Hypertarget{reactor_8h_a20b6cff12498f2db056084f86154d9a4}\label{reactor_8h_a20b6cff12498f2db056084f86154d9a4}} 
\index{reactor.h@{reactor.h}!OK\_TO\_FREE@{OK\_TO\_FREE}}
\index{OK\_TO\_FREE@{OK\_TO\_FREE}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{OK\_TO\_FREE}{OK\_TO\_FREE}}
{\footnotesize\ttfamily \#define O\+K\+\_\+\+T\+O\+\_\+\+F\+R\+EE~token\+\_\+and\+\_\+value}

The flag O\+K\+\_\+\+T\+O\+\_\+\+F\+R\+EE is used to indicate whether the void$\ast$ in toke\+\_\+t should be freed or not. \mbox{\Hypertarget{reactor_8h_a05ad7b5ea629e5f900ed750be8b1a357}\label{reactor_8h_a05ad7b5ea629e5f900ed750be8b1a357}} 
\index{reactor.h@{reactor.h}!OVERLAPPING@{OVERLAPPING}}
\index{OVERLAPPING@{OVERLAPPING}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{OVERLAPPING}{OVERLAPPING}}
{\footnotesize\ttfamily \#define O\+V\+E\+R\+L\+A\+P\+P\+I\+NG(\begin{DoxyParamCaption}\item[{}]{chain1,  }\item[{}]{chain2 }\end{DoxyParamCaption})~((chain1 \& chain2) != 0)}

Macro for determining whether two reactions are in the same chain (one depends on the other). This is conservative. If it returns false, then they are surely not in the same chain, but if it returns true, they may be in the same chain. This is in reactor\+\_\+threaded.\+c to execute reactions in parallel on multiple cores even if their levels are different. 

\doxysubsection{Typedef Documentation}
\mbox{\Hypertarget{reactor_8h_a59f5f6b9c6023baebf9c49c328b639a1}\label{reactor_8h_a59f5f6b9c6023baebf9c49c328b639a1}} 
\index{reactor.h@{reactor.h}!event\_t@{event\_t}}
\index{event\_t@{event\_t}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{event\_t}{event\_t}}
{\footnotesize\ttfamily typedef struct \mbox{\hyperlink{structevent__t}{event\+\_\+t}} \mbox{\hyperlink{structevent__t}{event\+\_\+t}}}

Typedef for \mbox{\hyperlink{structevent__t}{event\+\_\+t}} struct, used for storing activation records. \mbox{\Hypertarget{reactor_8h_a5ad7d32f3a1ddabdc2933223ca6ce2ea}\label{reactor_8h_a5ad7d32f3a1ddabdc2933223ca6ce2ea}} 
\index{reactor.h@{reactor.h}!handle\_t@{handle\_t}}
\index{handle\_t@{handle\_t}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{handle\_t}{handle\_t}}
{\footnotesize\ttfamily typedef int \mbox{\hyperlink{reactor_8h_a5ad7d32f3a1ddabdc2933223ca6ce2ea}{handle\+\_\+t}}}

Handles for scheduled triggers. These handles are returned by \mbox{\hyperlink{ctarget_8h_a961a0ed618d8dbb43f9f3b2bf3541af4}{schedule()}} functions. The intent is that the handle can be used to cancel a future scheduled event, but this is not implemented yet. \mbox{\Hypertarget{reactor_8h_a4448d06be794d3f5412d0edb412dc00e}\label{reactor_8h_a4448d06be794d3f5412d0edb412dc00e}} 
\index{reactor.h@{reactor.h}!index\_t@{index\_t}}
\index{index\_t@{index\_t}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{index\_t}{index\_t}}
{\footnotesize\ttfamily typedef \mbox{\hyperlink{pqueue_8h_ad8239ddc32134716f57e54bb972f6bf0}{pqueue\+\_\+pri\+\_\+t}} \mbox{\hyperlink{reactor_8h_a4448d06be794d3f5412d0edb412dc00e}{index\+\_\+t}}}

Topological order index for reactions. \mbox{\Hypertarget{reactor_8h_a973e404c4c1bd798a54501d0e1d640f9}\label{reactor_8h_a973e404c4c1bd798a54501d0e1d640f9}} 
\index{reactor.h@{reactor.h}!lf\_token\_t@{lf\_token\_t}}
\index{lf\_token\_t@{lf\_token\_t}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{lf\_token\_t}{lf\_token\_t}}
{\footnotesize\ttfamily typedef struct \mbox{\hyperlink{structlf__token__t}{lf\+\_\+token\+\_\+t}} \mbox{\hyperlink{structlf__token__t}{lf\+\_\+token\+\_\+t}}}

Token type for dynamically allocated arrays and structs sent as messages.

In the C LF target, a type for an output that ends in \textquotesingle{}$\ast$\textquotesingle{} is treated specially. The value carried by the output is assumed to be in dynamically allocated memory, and, using reference counting, after the last downstream reader of the value has finished, the memory will be freed. To prevent this freeing from occurring, the output type can be specified using the syntax \{= type$\ast$ =\}; this will not be treated as dynamically allocated memory. Alternatively, the programmer can give a typedef in the preamble that masks the trailing $\ast$.

This struct is the wrapper around the dynamically allocated memory that carries the message. The message can be an array of values, where the size of each value is element\+\_\+size (in bytes). If it is not an array, the length == 1. \mbox{\Hypertarget{reactor_8h_a149e5fee1c1841bcc96c72f200601d90}\label{reactor_8h_a149e5fee1c1841bcc96c72f200601d90}} 
\index{reactor.h@{reactor.h}!reaction\_function\_t@{reaction\_function\_t}}
\index{reaction\_function\_t@{reaction\_function\_t}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{reaction\_function\_t}{reaction\_function\_t}}
{\footnotesize\ttfamily typedef void($\ast$ reaction\+\_\+function\+\_\+t) (void $\ast$)}

Reaction function type. The argument passed to one of these reaction functions is a pointer to the self struct for the reactor. \mbox{\Hypertarget{reactor_8h_a1f0f71b6c8e0c54c65cbfaa154b40694}\label{reactor_8h_a1f0f71b6c8e0c54c65cbfaa154b40694}} 
\index{reactor.h@{reactor.h}!reaction\_t@{reaction\_t}}
\index{reaction\_t@{reaction\_t}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{reaction\_t}{reaction\_t}}
{\footnotesize\ttfamily typedef struct \mbox{\hyperlink{structreaction__t}{reaction\+\_\+t}} \mbox{\hyperlink{structreaction__t}{reaction\+\_\+t}}}

Reaction activation record to push onto the reaction queue. Some of the information in this struct is common among all instances of the reactor, and some is specific to each particular instance. These are marked below C\+O\+M\+M\+ON or I\+N\+S\+T\+A\+N\+CE accordingly. The C\+O\+M\+M\+ON information is set in the constructor. The fields marked R\+U\+N\+T\+I\+ME have values that change during execution. Instances of this struct are put onto the reaction queue (reaction\+\_\+q). \mbox{\Hypertarget{reactor_8h_a4505c08c065b48840a30eedd9845cce2}\label{reactor_8h_a4505c08c065b48840a30eedd9845cce2}} 
\index{reactor.h@{reactor.h}!string@{string}}
\index{string@{string}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{string}{string}}
{\footnotesize\ttfamily typedef char$\ast$ \mbox{\hyperlink{reactor_8h_a4505c08c065b48840a30eedd9845cce2}{string}}}

String type so that we don\textquotesingle{}t have to use \{= char$\ast$ =\}. Use this for strings that are not dynamically allocated. For dynamically allocated strings that have to be freed after being consumed downstream, use type char$\ast$. \mbox{\Hypertarget{reactor_8h_a2c506d193748554de2ff32e5f7cee41e}\label{reactor_8h_a2c506d193748554de2ff32e5f7cee41e}} 
\index{reactor.h@{reactor.h}!token\_present\_t@{token\_present\_t}}
\index{token\_present\_t@{token\_present\_t}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{token\_present\_t}{token\_present\_t}}
{\footnotesize\ttfamily typedef struct \mbox{\hyperlink{structtoken__present__t}{token\+\_\+present\+\_\+t}} \mbox{\hyperlink{structtoken__present__t}{token\+\_\+present\+\_\+t}}}

A struct with a pointer to a \mbox{\hyperlink{structlf__token__t}{lf\+\_\+token\+\_\+t}} and an \+\_\+is\+\_\+present variable for use to initialize actions in start\+\_\+time\+\_\+step(). \mbox{\Hypertarget{reactor_8h_ae98c19a4a03c495fdd3044c206e99afc}\label{reactor_8h_ae98c19a4a03c495fdd3044c206e99afc}} 
\index{reactor.h@{reactor.h}!trigger\_t@{trigger\_t}}
\index{trigger\_t@{trigger\_t}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{trigger\_t}{trigger\_t}}
{\footnotesize\ttfamily typedef struct \mbox{\hyperlink{structtrigger__t}{trigger\+\_\+t}} \mbox{\hyperlink{structtrigger__t}{trigger\+\_\+t}}}

Trigger struct representing an output, timer, action, or input. See below. \mbox{\Hypertarget{reactor_8h_a3fa7784c89589b49764048e9909d0e07}\label{reactor_8h_a3fa7784c89589b49764048e9909d0e07}} 
\index{reactor.h@{reactor.h}!ushort@{ushort}}
\index{ushort@{ushort}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{ushort}{ushort}}
{\footnotesize\ttfamily typedef unsigned short int \mbox{\hyperlink{reactor_8h_a3fa7784c89589b49764048e9909d0e07}{ushort}}}

ushort type. Redefine here for portability if sys/types.\+h is not included. \begin{DoxySeeAlso}{See also}
sys/types.\+h
\end{DoxySeeAlso}
\begin{DoxyNote}{Note}
using sizeof(ushort) should be okay but not sizeof ushort. 
\end{DoxyNote}


\doxysubsection{Enumeration Type Documentation}
\mbox{\Hypertarget{reactor_8h_a0183c0b43037a172a1cd9aa6ed6b3822}\label{reactor_8h_a0183c0b43037a172a1cd9aa6ed6b3822}} 
\index{reactor.h@{reactor.h}!lf\_spacing\_policy\_t@{lf\_spacing\_policy\_t}}
\index{lf\_spacing\_policy\_t@{lf\_spacing\_policy\_t}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{lf\_spacing\_policy\_t}{lf\_spacing\_policy\_t}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{reactor_8h_a0183c0b43037a172a1cd9aa6ed6b3822}{lf\+\_\+spacing\+\_\+policy\+\_\+t}}}

Policy for handling scheduled events that violate the specified minimum interarrival time. The default policy is {\ttfamily defer}\+: adjust the tag to that the minimum interarrival time is satisfied. The {\ttfamily drop} policy simply drops events that are scheduled too early. The {\ttfamily replace} policy will attempt to replace the value of the event that it preceded it. Unless the preceding event has already been handled, its gets assigned the value of the new event. If the preceding event has already been popped off the event queue, the {\ttfamily defer} policy is fallen back to. \mbox{\Hypertarget{reactor_8h_a759ba374f75ea0025b9af1bb35f14d7e}\label{reactor_8h_a759ba374f75ea0025b9af1bb35f14d7e}} 
\index{reactor.h@{reactor.h}!port\_status\_t@{port\_status\_t}}
\index{port\_status\_t@{port\_status\_t}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{port\_status\_t}{port\_status\_t}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{reactor_8h_a759ba374f75ea0025b9af1bb35f14d7e}{port\+\_\+status\+\_\+t}}}

Status of a given port at a given logical time.

If the value is \textquotesingle{}present\textquotesingle{}, it is an indicator that the port is present at the given logical time. If the value is \textquotesingle{}absent\textquotesingle{}, it is an indicator that the port is absent at the given logical time. If the value is \textquotesingle{}unknown\textquotesingle{}, it is unknown whether the port is present or absent (e.\+g., in a distributed application).

\begin{DoxyNote}{Note}
For non-\/network ports, unknown is unused. 

The absent and present fields need to be compatible with false and true respectively because for non-\/network ports, the status can either be present or absent (no possibility of unknown). 
\end{DoxyNote}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{reactor_8h_ae3c5c84c6f22c1bdf98af8b1a55a9f4b}\label{reactor_8h_ae3c5c84c6f22c1bdf98af8b1a55a9f4b}} 
\index{reactor.h@{reactor.h}!\_\_initialize\_timers@{\_\_initialize\_timers}}
\index{\_\_initialize\_timers@{\_\_initialize\_timers}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{\_\_initialize\_timers()}{\_\_initialize\_timers()}}
{\footnotesize\ttfamily void \+\_\+\+\_\+initialize\+\_\+timers (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Function (to be code generated) to schedule timers. \mbox{\Hypertarget{reactor_8h_a868e02a04eabb4ffed63f6141f5f64a2}\label{reactor_8h_a868e02a04eabb4ffed63f6141f5f64a2}} 
\index{reactor.h@{reactor.h}!\_\_initialize\_trigger\_objects@{\_\_initialize\_trigger\_objects}}
\index{\_\_initialize\_trigger\_objects@{\_\_initialize\_trigger\_objects}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{\_\_initialize\_trigger\_objects()}{\_\_initialize\_trigger\_objects()}}
{\footnotesize\ttfamily void \+\_\+\+\_\+initialize\+\_\+trigger\+\_\+objects (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Generated function that produces a table containing all triggers (i.\+e., inputs, timers, and actions). \mbox{\Hypertarget{reactor_8h_a1825238bcb81ecc6aeeb6dd42d308089}\label{reactor_8h_a1825238bcb81ecc6aeeb6dd42d308089}} 
\index{reactor.h@{reactor.h}!\_\_pop\_events@{\_\_pop\_events}}
\index{\_\_pop\_events@{\_\_pop\_events}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{\_\_pop\_events()}{\_\_pop\_events()}}
{\footnotesize\ttfamily void \+\_\+\+\_\+pop\+\_\+events (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Pop all events from event\+\_\+q with timestamp equal to current\+\_\+time, extract all the reactions triggered by these events, and stick them into the reaction queue.

Pop all events from event\+\_\+q with timestamp equal to current\+\_\+tag.\+time, extract all the reactions triggered by these events, and stick them into the reaction queue. \mbox{\Hypertarget{reactor_8h_a1b914dafd583948c817b0ae6ce739b6d}\label{reactor_8h_a1b914dafd583948c817b0ae6ce739b6d}} 
\index{reactor.h@{reactor.h}!\_\_schedule@{\_\_schedule}}
\index{\_\_schedule@{\_\_schedule}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{\_\_schedule()}{\_\_schedule()}}
{\footnotesize\ttfamily \mbox{\hyperlink{reactor_8h_a5ad7d32f3a1ddabdc2933223ca6ce2ea}{handle\+\_\+t}} \+\_\+\+\_\+schedule (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structtrigger__t}{trigger\+\_\+t}} $\ast$}]{trigger,  }\item[{\mbox{\hyperlink{tag_8h_a181bf532390385b9092615f354cccf87}{interval\+\_\+t}}}]{extra\+\_\+delay,  }\item[{\mbox{\hyperlink{structlf__token__t}{lf\+\_\+token\+\_\+t}} $\ast$}]{token }\end{DoxyParamCaption})}

Internal version of the \mbox{\hyperlink{ctarget_8h_a961a0ed618d8dbb43f9f3b2bf3541af4}{schedule()}} function, used by generated \+\_\+\+\_\+start\+\_\+timers() function. 
\begin{DoxyParams}{Parameters}
{\em trigger} & The action or timer to be triggered. \\
\hline
{\em delay} & Offset of the event release. \\
\hline
{\em token} & The token payload. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A handle to the event, or 0 if no event was scheduled, or -\/1 for error.
\end{DoxyReturn}
Schedule the specified trigger at current\+\_\+tag.\+time plus the offset of the specified trigger plus the delay. See \mbox{\hyperlink{ctarget_8h_ab666cf351f7ca211945793b37cb29f58}{schedule\+\_\+token()}} in \mbox{\hyperlink{reactor_8h}{reactor.\+h}} for details. This is the internal implementation shared by both the threaded and non-\/threaded versions.

The value is required to be either N\+U\+LL or a pointer to a token wrapping the payload. The token carries a reference count, and when the reference count decrements to 0, the will be freed. Hence, it is essential that the payload be in memory allocated using malloc.

There are three conditions under which this function will not actually put an event on the event queue and decrement the reference count of the token (if there is one), which could result in the payload being freed. In all three cases, this function returns 0. Otherwise, it returns a handle to the scheduled trigger, which is an integer greater than 0.

The first condition is that a stop has been requested and the trigger offset plus the extra delay is greater than zero. The second condition is that the trigger offset plus the extra delay is greater that the requested stop time (timeout). The third condition is that the trigger argument is null.


\begin{DoxyParams}{Parameters}
{\em trigger} & The trigger to be invoked at a later logical time. \\
\hline
{\em extra\+\_\+delay} & The logical time delay, which gets added to the trigger\textquotesingle{}s minimum delay, if it has one. If this number is negative, then zero is used instead. \\
\hline
{\em token} & The token wrapping the payload or N\+U\+LL for no payload. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A handle to the event, or 0 if no new event was scheduled, or -\/1 for error. 
\end{DoxyReturn}
\mbox{\Hypertarget{reactor_8h_aedbba6d4986cc6d46b07d53d3752270f}\label{reactor_8h_aedbba6d4986cc6d46b07d53d3752270f}} 
\index{reactor.h@{reactor.h}!\_\_set\_default\_command\_line\_options@{\_\_set\_default\_command\_line\_options}}
\index{\_\_set\_default\_command\_line\_options@{\_\_set\_default\_command\_line\_options}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{\_\_set\_default\_command\_line\_options()}{\_\_set\_default\_command\_line\_options()}}
{\footnotesize\ttfamily void \+\_\+\+\_\+set\+\_\+default\+\_\+command\+\_\+line\+\_\+options (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Generated function that optionally sets default command-\/line options. \mbox{\Hypertarget{reactor_8h_af8aacf433fcf349ffa1b163962eb3681}\label{reactor_8h_af8aacf433fcf349ffa1b163962eb3681}} 
\index{reactor.h@{reactor.h}!\_\_start\_time\_step@{\_\_start\_time\_step}}
\index{\_\_start\_time\_step@{\_\_start\_time\_step}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{\_\_start\_time\_step()}{\_\_start\_time\_step()}}
{\footnotesize\ttfamily void \+\_\+\+\_\+start\+\_\+time\+\_\+step (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Generated function that resets outputs to be absent at the start of a new time step.

Use tables to reset is\+\_\+present fields to false, set intended\+\_\+tag fields in federated execution to the current\+\_\+tag, and decrement reference counts between time steps and at the end of execution. \mbox{\Hypertarget{reactor_8h_a9ea1110b1a18ccf10931bf5f9adaf299}\label{reactor_8h_a9ea1110b1a18ccf10931bf5f9adaf299}} 
\index{reactor.h@{reactor.h}!\_\_trigger\_shutdown\_reactions@{\_\_trigger\_shutdown\_reactions}}
\index{\_\_trigger\_shutdown\_reactions@{\_\_trigger\_shutdown\_reactions}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{\_\_trigger\_shutdown\_reactions()}{\_\_trigger\_shutdown\_reactions()}}
{\footnotesize\ttfamily bool \+\_\+\+\_\+trigger\+\_\+shutdown\+\_\+reactions (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Function (to be code generated) to trigger shutdown reactions. \mbox{\Hypertarget{reactor_8h_a1d807ba211ee2edb588750d4553090c1}\label{reactor_8h_a1d807ba211ee2edb588750d4553090c1}} 
\index{reactor.h@{reactor.h}!\_\_trigger\_startup\_reactions@{\_\_trigger\_startup\_reactions}}
\index{\_\_trigger\_startup\_reactions@{\_\_trigger\_startup\_reactions}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{\_\_trigger\_startup\_reactions()}{\_\_trigger\_startup\_reactions()}}
{\footnotesize\ttfamily void \+\_\+\+\_\+trigger\+\_\+startup\+\_\+reactions (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Function (to be code generated) to trigger startup reactions. \mbox{\Hypertarget{reactor_8h_abadead0c4f54963b062503cf6cb7ace7}\label{reactor_8h_abadead0c4f54963b062503cf6cb7ace7}} 
\index{reactor.h@{reactor.h}!\_lf\_advance\_logical\_time@{\_lf\_advance\_logical\_time}}
\index{\_lf\_advance\_logical\_time@{\_lf\_advance\_logical\_time}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{\_lf\_advance\_logical\_time()}{\_lf\_advance\_logical\_time()}}
{\footnotesize\ttfamily void \+\_\+lf\+\_\+advance\+\_\+logical\+\_\+time (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{tag_8h_ad740f3189d2a477285138e682eafa8c5}{instant\+\_\+t}}}]{next\+\_\+time }\end{DoxyParamCaption})}

Advance from the current tag to the next. If the given next\+\_\+time is equal to the current time, then increase the microstep. Otherwise, update the current time and set the microstep to zero.

Advance from the current tag to the next. If the given next\+\_\+time is equal to the current time, then increase the microstep. Otherwise, update the current time and set the microstep to zero.


\begin{DoxyParams}{Parameters}
{\em next\+\_\+time} & The time step to advance to. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{reactor_8h_aed87bffa17d8c4ac396b288ba4c0c88b}\label{reactor_8h_aed87bffa17d8c4ac396b288ba4c0c88b}} 
\index{reactor.h@{reactor.h}!\_lf\_create\_dummy\_event@{\_lf\_create\_dummy\_event}}
\index{\_lf\_create\_dummy\_event@{\_lf\_create\_dummy\_event}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{\_lf\_create\_dummy\_event()}{\_lf\_create\_dummy\_event()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structevent__t}{event\+\_\+t}}$\ast$ \+\_\+lf\+\_\+create\+\_\+dummy\+\_\+event (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structtrigger__t}{trigger\+\_\+t}} $\ast$}]{trigger,  }\item[{\mbox{\hyperlink{tag_8h_ad740f3189d2a477285138e682eafa8c5}{instant\+\_\+t}}}]{time,  }\item[{\mbox{\hyperlink{structevent__t}{event\+\_\+t}} $\ast$}]{next,  }\item[{unsigned int}]{offset }\end{DoxyParamCaption})}

Create a dummy event to be used as a spacer in the event queue. \mbox{\Hypertarget{reactor_8h_a60ec02f52c1a7db4c7bdbc2871eae636}\label{reactor_8h_a60ec02f52c1a7db4c7bdbc2871eae636}} 
\index{reactor.h@{reactor.h}!\_lf\_fd\_send\_stop\_request\_to\_rti@{\_lf\_fd\_send\_stop\_request\_to\_rti}}
\index{\_lf\_fd\_send\_stop\_request\_to\_rti@{\_lf\_fd\_send\_stop\_request\_to\_rti}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{\_lf\_fd\_send\_stop\_request\_to\_rti()}{\_lf\_fd\_send\_stop\_request\_to\_rti()}}
{\footnotesize\ttfamily void \+\_\+lf\+\_\+fd\+\_\+send\+\_\+stop\+\_\+request\+\_\+to\+\_\+rti (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

For a federated execution, send a S\+T\+O\+P\+\_\+\+R\+E\+Q\+U\+E\+ST message to the R\+TI.

Send a S\+T\+O\+P\+\_\+\+R\+E\+Q\+U\+E\+ST message to the R\+TI with payload equal to the current tag plus one microstep.

This function raises a global barrier on logical tag at the current tag.

This function assumes the caller holds the mutex lock. \mbox{\Hypertarget{reactor_8h_a116897d2fd982e8836d2118af641b575}\label{reactor_8h_a116897d2fd982e8836d2118af641b575}} 
\index{reactor.h@{reactor.h}!\_lf\_get\_new\_event@{\_lf\_get\_new\_event}}
\index{\_lf\_get\_new\_event@{\_lf\_get\_new\_event}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{\_lf\_get\_new\_event()}{\_lf\_get\_new\_event()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structevent__t}{event\+\_\+t}}$\ast$ \+\_\+lf\+\_\+get\+\_\+new\+\_\+event (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Get a new event. If there is a recycled event available, use that. If not, allocate a new one. In either case, all fields will be zero\textquotesingle{}ed out. \mbox{\Hypertarget{reactor_8h_ab461661c6c9757862959540fe57e3554}\label{reactor_8h_ab461661c6c9757862959540fe57e3554}} 
\index{reactor.h@{reactor.h}!\_lf\_is\_blocked\_by\_executing\_reaction@{\_lf\_is\_blocked\_by\_executing\_reaction}}
\index{\_lf\_is\_blocked\_by\_executing\_reaction@{\_lf\_is\_blocked\_by\_executing\_reaction}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{\_lf\_is\_blocked\_by\_executing\_reaction()}{\_lf\_is\_blocked\_by\_executing\_reaction()}}
{\footnotesize\ttfamily bool \+\_\+lf\+\_\+is\+\_\+blocked\+\_\+by\+\_\+executing\+\_\+reaction (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

If multithreaded and the reaction is blocked by a currently executing reaction, return true. Otherwise, return false. 
\begin{DoxyParams}{Parameters}
{\em reaction} & The reaction.\\
\hline
\end{DoxyParams}
Return false. 
\begin{DoxyParams}{Parameters}
{\em reaction} & The reaction. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{reactor_8h_aa46a83ed702e2c83d42625a8c78a9f50}\label{reactor_8h_aa46a83ed702e2c83d42625a8c78a9f50}} 
\index{reactor.h@{reactor.h}!\_lf\_notify\_workers@{\_lf\_notify\_workers}}
\index{\_lf\_notify\_workers@{\_lf\_notify\_workers}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{\_lf\_notify\_workers()}{\_lf\_notify\_workers()}}
{\footnotesize\ttfamily void \+\_\+lf\+\_\+notify\+\_\+workers (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

If multithreaded, notify workers that something has changed on the reaction\+\_\+q. Otherwise, do nothing.

Do nothing. This implementation is not multithreaded.

Notify workers that something has changed on the reaction\+\_\+q. Notification is performed only if there is a reaction on the reaction queue that is ready to execute and there is an idle worker thread. This function acquires the mutex lock. \mbox{\Hypertarget{reactor_8h_a662cfd5714e5930f5e1c880f13deba6d}\label{reactor_8h_a662cfd5714e5930f5e1c880f13deba6d}} 
\index{reactor.h@{reactor.h}!\_lf\_recycle\_event@{\_lf\_recycle\_event}}
\index{\_lf\_recycle\_event@{\_lf\_recycle\_event}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{\_lf\_recycle\_event()}{\_lf\_recycle\_event()}}
{\footnotesize\ttfamily void \+\_\+lf\+\_\+recycle\+\_\+event (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structevent__t}{event\+\_\+t}} $\ast$}]{e }\end{DoxyParamCaption})}

Recycle the given event. Zero it out and pushed it onto the recycle queue. \mbox{\Hypertarget{reactor_8h_af1f3a3c4613102e28fc0105408731c5e}\label{reactor_8h_af1f3a3c4613102e28fc0105408731c5e}} 
\index{reactor.h@{reactor.h}!\_lf\_schedule\_at\_tag@{\_lf\_schedule\_at\_tag}}
\index{\_lf\_schedule\_at\_tag@{\_lf\_schedule\_at\_tag}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{\_lf\_schedule\_at\_tag()}{\_lf\_schedule\_at\_tag()}}
{\footnotesize\ttfamily int \+\_\+lf\+\_\+schedule\+\_\+at\+\_\+tag (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structtrigger__t}{trigger\+\_\+t}} $\ast$}]{trigger,  }\item[{\mbox{\hyperlink{structtag__t}{tag\+\_\+t}}}]{tag,  }\item[{\mbox{\hyperlink{structlf__token__t}{lf\+\_\+token\+\_\+t}} $\ast$}]{token }\end{DoxyParamCaption})}

Schedule events at a specific tag (time, microstep), provided that the tag is in the future relative to the current tag. The input time values are absolute.

If there is an event found at the requested tag, the payload is replaced and 0 is returned.


\begin{DoxyParams}{Parameters}
{\em trigger} & The trigger to be invoked at a later logical time. \\
\hline
{\em tag} & Logical tag of the event \\
\hline
{\em token} & The token wrapping the payload or N\+U\+LL for no payload.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 for success, 0 if no new event was scheduled (instead, the payload was updated), or -\/1 for error.
\end{DoxyReturn}
Schedule events at a specific tag (time, microstep), provided that the tag is in the future relative to the current tag. The input time values are absolute.

If there is an event found at the requested tag, the payload is replaced and 0 is returned.

Note that this function is an internal A\+PI that must be called with tags that are in order for a given trigger. This means that the following order is illegal\+: \+\_\+lf\+\_\+schedule\+\_\+at\+\_\+tag(trigger1, bigger\+\_\+tag, ...); \+\_\+lf\+\_\+schedule\+\_\+at\+\_\+tag(trigger1, smaller\+\_\+tag, ...); where bigger\+\_\+tag $>$ smaller\+\_\+tag. This function is primarily used for network communication (which is assumed to be in order).

This function assumes the caller holds the mutex lock.


\begin{DoxyParams}{Parameters}
{\em trigger} & The trigger to be invoked at a later logical time. \\
\hline
{\em tag} & Logical tag of the event \\
\hline
{\em token} & The token wrapping the payload or N\+U\+LL for no payload.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 for success, 0 if no new event was scheduled (instead, the payload was updated), or -\/1 for error (the tag is equal to or less than the current tag). 
\end{DoxyReturn}
\mbox{\Hypertarget{reactor_8h_a2c07a7b9e616070f32fa88b4959fba53}\label{reactor_8h_a2c07a7b9e616070f32fa88b4959fba53}} 
\index{reactor.h@{reactor.h}!\_lf\_schedule\_copy@{\_lf\_schedule\_copy}}
\index{\_lf\_schedule\_copy@{\_lf\_schedule\_copy}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{\_lf\_schedule\_copy()}{\_lf\_schedule\_copy()}}
{\footnotesize\ttfamily \mbox{\hyperlink{reactor_8h_a5ad7d32f3a1ddabdc2933223ca6ce2ea}{handle\+\_\+t}} \+\_\+lf\+\_\+schedule\+\_\+copy (\begin{DoxyParamCaption}\item[{void $\ast$}]{action,  }\item[{\mbox{\hyperlink{tag_8h_a181bf532390385b9092615f354cccf87}{interval\+\_\+t}}}]{offset,  }\item[{void $\ast$}]{value,  }\item[{int}]{length }\end{DoxyParamCaption})}

Schedule an action to occur with the specified value and time offset with a copy of the specified value. If the value is non-\/null, then it will be copied into newly allocated memory under the assumption that its size is given in the trigger\textquotesingle{}s token object\textquotesingle{}s element\+\_\+size field multiplied by the specified length. See \mbox{\hyperlink{ctarget_8h_ab666cf351f7ca211945793b37cb29f58}{schedule\+\_\+token()}}, which this uses, for details. 
\begin{DoxyParams}{Parameters}
{\em action} & Pointer to an action on a self struct. \\
\hline
{\em offset} & The time offset over and above that in the action. \\
\hline
{\em value} & A pointer to the value to copy. \\
\hline
{\em length} & The length, if an array, 1 if a scalar, and 0 if value is N\+U\+LL. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A handle to the event, or 0 if no event was scheduled, or -\/1 for error.
\end{DoxyReturn}
Schedule an action to occur with the specified value and time offset with a copy of the specified value. See \mbox{\hyperlink{reactor_8h}{reactor.\+h}} for documentation. \mbox{\Hypertarget{reactor_8h_aa715873b79dee5b9f50daa2fef88cf34}\label{reactor_8h_aa715873b79dee5b9f50daa2fef88cf34}} 
\index{reactor.h@{reactor.h}!\_lf\_schedule\_int@{\_lf\_schedule\_int}}
\index{\_lf\_schedule\_int@{\_lf\_schedule\_int}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{\_lf\_schedule\_int()}{\_lf\_schedule\_int()}}
{\footnotesize\ttfamily \mbox{\hyperlink{reactor_8h_a5ad7d32f3a1ddabdc2933223ca6ce2ea}{handle\+\_\+t}} \+\_\+lf\+\_\+schedule\+\_\+int (\begin{DoxyParamCaption}\item[{void $\ast$}]{action,  }\item[{\mbox{\hyperlink{tag_8h_a181bf532390385b9092615f354cccf87}{interval\+\_\+t}}}]{extra\+\_\+delay,  }\item[{int}]{value }\end{DoxyParamCaption})}

Schedule the specified action with an integer value at a later logical time that depends on whether the action is logical or physical and what its parameter values are. This wraps a copy of the integer value in a token. See \mbox{\hyperlink{ctarget_8h_ab666cf351f7ca211945793b37cb29f58}{schedule\+\_\+token()}} for more details. 
\begin{DoxyParams}{Parameters}
{\em action} & The action to be triggered. \\
\hline
{\em extra\+\_\+delay} & Extra offset of the event release above that in the action. \\
\hline
{\em value} & The value to send. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A handle to the event, or 0 if no event was scheduled, or -\/1 for error.
\end{DoxyReturn}
Variant of schedule\+\_\+value when the value is an integer. See \mbox{\hyperlink{reactor_8h}{reactor.\+h}} for documentation. 
\begin{DoxyParams}{Parameters}
{\em action} & Pointer to an action on the self struct. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{reactor_8h_a369700b5e0906335f3d304a67eec5f29}\label{reactor_8h_a369700b5e0906335f3d304a67eec5f29}} 
\index{reactor.h@{reactor.h}!\_lf\_schedule\_token@{\_lf\_schedule\_token}}
\index{\_lf\_schedule\_token@{\_lf\_schedule\_token}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{\_lf\_schedule\_token()}{\_lf\_schedule\_token()}}
{\footnotesize\ttfamily \mbox{\hyperlink{reactor_8h_a5ad7d32f3a1ddabdc2933223ca6ce2ea}{handle\+\_\+t}} \+\_\+lf\+\_\+schedule\+\_\+token (\begin{DoxyParamCaption}\item[{void $\ast$}]{action,  }\item[{\mbox{\hyperlink{tag_8h_a181bf532390385b9092615f354cccf87}{interval\+\_\+t}}}]{extra\+\_\+delay,  }\item[{\mbox{\hyperlink{structlf__token__t}{lf\+\_\+token\+\_\+t}} $\ast$}]{token }\end{DoxyParamCaption})}

Schedule the specified action with the specified token as a payload. This will trigger an event at a later logical time that depends on whether the action is logical or physical and what its parameter values are.

logical action\+: A logical action has an offset (default is zero) and a minimum interarrival time (M\+IT), which also defaults to zero. The logical time at which this scheduled event will trigger is the current time plus the offset plus the delay argument given to this function. If, however, that time is not greater than a prior triggering of this logical action by at least the M\+IT, then the one of two things can happen depending on the policy specified for the action. If the action\textquotesingle{}s policy is D\+R\+OP (default), then the action is simply dropped and the memory pointed to by value argument is freed. If the policy is D\+E\+F\+ER, then the time will be increased to equal the time of the most recent triggering plus the M\+IT.

For the above, \char`\"{}current time\char`\"{} means the logical time of the reaction that is calling this function. Logical actions should always be scheduled within a reaction invocation, never asynchronously from the outside. F\+I\+X\+ME\+: This needs to be checked.

physical action\+: A physical action has all the same parameters as a logical action, but its timestamp will be the larger of the current physical time and the time it would be assigned if it were a logical action.

The token is required to be either N\+U\+LL or a pointer to a token created using \mbox{\hyperlink{reactor_8h_a9d8ea5bc3ac4d18edafab309bc2a9c8a}{create\+\_\+token()}}.

There are three conditions under which this function will not actually put an event on the event queue and decrement the reference count of the token (if there is one), which could result in the payload being freed. In all three cases, this function returns 0. Otherwise, it returns a handle to the scheduled trigger, which is an integer greater than 0.

The first condition is that stop() has been called and the time offset of this event is greater than zero. The second condition is that the logical time of the event is greater that the stop time (timeout) that is specified in the target properties or on the command line. The third condition is that the trigger argument is null.


\begin{DoxyParams}{Parameters}
{\em action} & The action to be triggered. \\
\hline
{\em extra\+\_\+delay} & Extra offset of the event release above that in the action. \\
\hline
{\em token} & The token to carry the payload or null for no payload. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A handle to the event, or 0 if no event was scheduled, or -\/1 for error.
\end{DoxyReturn}
Runtime infrastructure for the non-\/threaded version of the C target of Lingua Franca.

\begin{DoxyAuthor}{Author}
\{Edward A. Lee \href{mailto:eal@berkeley.edu}{\texttt{ eal@berkeley.\+edu}}\} 

\{Marten Lohstroh \href{mailto:marten@berkeley.edu}{\texttt{ marten@berkeley.\+edu}}\} 

\{Soroush Bateni \href{mailto:soroush@utdallas.edu}{\texttt{ soroush@utdallas.\+edu}}\} Schedule the specified trigger at current\+\_\+tag.\+time plus the offset of the specified trigger plus the delay. See \mbox{\hyperlink{reactor_8h}{reactor.\+h}} for documentation.
\end{DoxyAuthor}
Schedule the specified trigger at current\+\_\+tag.\+time plus the offset of the specified trigger plus the delay. See \mbox{\hyperlink{reactor_8h}{reactor.\+h}} for documentation. \mbox{\Hypertarget{reactor_8h_aa0a09f1dc9ee5870a6d225a3569388df}\label{reactor_8h_aa0a09f1dc9ee5870a6d225a3569388df}} 
\index{reactor.h@{reactor.h}!\_lf\_schedule\_value@{\_lf\_schedule\_value}}
\index{\_lf\_schedule\_value@{\_lf\_schedule\_value}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{\_lf\_schedule\_value()}{\_lf\_schedule\_value()}}
{\footnotesize\ttfamily \mbox{\hyperlink{reactor_8h_a5ad7d32f3a1ddabdc2933223ca6ce2ea}{handle\+\_\+t}} \+\_\+lf\+\_\+schedule\+\_\+value (\begin{DoxyParamCaption}\item[{void $\ast$}]{action,  }\item[{\mbox{\hyperlink{tag_8h_a181bf532390385b9092615f354cccf87}{interval\+\_\+t}}}]{extra\+\_\+delay,  }\item[{void $\ast$}]{value,  }\item[{int}]{length }\end{DoxyParamCaption})}

Variant of schedule\+\_\+token that creates a token to carry the specified value. The value is required to be malloc\textquotesingle{}d memory with a size equal to the element\+\_\+size of the specifies action times the length parameter. See \mbox{\hyperlink{ctarget_8h_ab666cf351f7ca211945793b37cb29f58}{schedule\+\_\+token()}} for details. 
\begin{DoxyParams}{Parameters}
{\em action} & The action to be triggered. \\
\hline
{\em extra\+\_\+delay} & Extra offset of the event release above that in the action. \\
\hline
{\em value} & Dynamically allocated memory containing the value to send. \\
\hline
{\em length} & The length of the array, if it is an array, or 1 for a scalar and 0 for no payload. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A handle to the event, or 0 if no event was scheduled, or -\/1 for error.
\end{DoxyReturn}
Variant of schedule\+\_\+token that creates a token to carry the specified value. See \mbox{\hyperlink{reactor_8h}{reactor.\+h}} for documentation. \mbox{\Hypertarget{reactor_8h_a9d8ea5bc3ac4d18edafab309bc2a9c8a}\label{reactor_8h_a9d8ea5bc3ac4d18edafab309bc2a9c8a}} 
\index{reactor.h@{reactor.h}!create\_token@{create\_token}}
\index{create\_token@{create\_token}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{create\_token()}{create\_token()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structlf__token__t}{lf\+\_\+token\+\_\+t}}$\ast$ create\+\_\+token (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{element\+\_\+size }\end{DoxyParamCaption})}

Create a new token and initialize it. The value pointer will be N\+U\+LL and the length will be 0. 
\begin{DoxyParams}{Parameters}
{\em element\+\_\+size} & The size of an element carried in the payload or 0 if there is no payload. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A pointer to a new or recycled \mbox{\hyperlink{structlf__token__t}{lf\+\_\+token\+\_\+t}} struct.
\end{DoxyReturn}
Create a new token and initialize it. The value pointer will be N\+U\+LL and the length will be 0. 
\begin{DoxyParams}{Parameters}
{\em element\+\_\+size} & The size of an element carried in the payload or 0 if there is no payload. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A new or recycled \mbox{\hyperlink{structlf__token__t}{lf\+\_\+token\+\_\+t}} struct.
\end{DoxyReturn}
\begin{DoxyNote}{Note}
For multithreaded applications, the caller must hold the mutex lock because it accesses global variables. 
\end{DoxyNote}
\mbox{\Hypertarget{reactor_8h_a8b4f2e4e87e43670217c0c53099ae2f5}\label{reactor_8h_a8b4f2e4e87e43670217c0c53099ae2f5}} 
\index{reactor.h@{reactor.h}!get\_start\_time@{get\_start\_time}}
\index{get\_start\_time@{get\_start\_time}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{get\_start\_time()}{get\_start\_time()}}
{\footnotesize\ttfamily \mbox{\hyperlink{tag_8h_ad740f3189d2a477285138e682eafa8c5}{instant\+\_\+t}} get\+\_\+start\+\_\+time (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Return the time of the start of execution in nanoseconds. This is both the starting physical and starting logical time. On many platforms, this is the number of nanoseconds since January 1, 1970, but it is actually platform dependent. \begin{DoxyReturn}{Returns}
A time instant.
\end{DoxyReturn}
Return the physical time of the start of execution in nanoseconds. $\ast$ On many platforms, this is the number of nanoseconds since January 1, 1970, but it is actually platform dependent. $\ast$ \begin{DoxyReturn}{Returns}
A time instant. 
\end{DoxyReturn}
\mbox{\Hypertarget{reactor_8h_a54be08fbc7990c2d8082a31cbbf6e019}\label{reactor_8h_a54be08fbc7990c2d8082a31cbbf6e019}} 
\index{reactor.h@{reactor.h}!get\_stp\_offset@{get\_stp\_offset}}
\index{get\_stp\_offset@{get\_stp\_offset}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{get\_stp\_offset()}{get\_stp\_offset()}}
{\footnotesize\ttfamily \mbox{\hyperlink{tag_8h_a181bf532390385b9092615f354cccf87}{interval\+\_\+t}} get\+\_\+stp\+\_\+offset (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Return the global S\+TP offset on advancement of logical time for federated execution. \mbox{\Hypertarget{reactor_8h_ad96dc6cbe1d3365e52aad6aecbf036d8}\label{reactor_8h_ad96dc6cbe1d3365e52aad6aecbf036d8}} 
\index{reactor.h@{reactor.h}!print\_snapshot@{print\_snapshot}}
\index{print\_snapshot@{print\_snapshot}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{print\_snapshot()}{print\_snapshot()}}
{\footnotesize\ttfamily void print\+\_\+snapshot (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Print a snapshot of the priority queues used during execution (for debugging).

If D\+E\+B\+UG logging is enabled, prints the status of the event queue, the reaction queue, and the executing queue. \mbox{\Hypertarget{reactor_8h_af629769c213699f0e4c9360811ee7251}\label{reactor_8h_af629769c213699f0e4c9360811ee7251}} 
\index{reactor.h@{reactor.h}!request\_stop@{request\_stop}}
\index{request\_stop@{request\_stop}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{request\_stop()}{request\_stop()}}
{\footnotesize\ttfamily void request\+\_\+stop (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Request a stop to execution as soon as possible. In a non-\/federated execution, this will occur at the conclusion of the current logical time. In a federated execution, it will likely occur at a later logical time determined by the R\+TI so that all federates stop at the same logical time.

Stop execution at the conclusion of the next microstep. \mbox{\Hypertarget{reactor_8h_a75a5bf324229d35fb88541a04449c95b}\label{reactor_8h_a75a5bf324229d35fb88541a04449c95b}} 
\index{reactor.h@{reactor.h}!set\_stp\_offset@{set\_stp\_offset}}
\index{set\_stp\_offset@{set\_stp\_offset}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{set\_stp\_offset()}{set\_stp\_offset()}}
{\footnotesize\ttfamily void set\+\_\+stp\+\_\+offset (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{tag_8h_a181bf532390385b9092615f354cccf87}{interval\+\_\+t}}}]{offset }\end{DoxyParamCaption})}

Set the global S\+TP offset on advancement of logical time for federated execution.


\begin{DoxyParams}{Parameters}
{\em offset} & A positive time value to be applied as the S\+TP offset. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{reactor_8h_a114c79dc673219d5df3b794552ca88d7}\label{reactor_8h_a114c79dc673219d5df3b794552ca88d7}} 
\index{reactor.h@{reactor.h}!terminate\_execution@{terminate\_execution}}
\index{terminate\_execution@{terminate\_execution}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{terminate\_execution()}{terminate\_execution()}}
{\footnotesize\ttfamily void terminate\+\_\+execution (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Function (to be code generated) to terminate execution. This will be invoked after all shutdown actions have completed.

Close sockets used to communicate with other federates, if they are open, and send a R\+E\+S\+I\+GN message to the R\+TI. This implements the function defined in \mbox{\hyperlink{reactor_8h}{reactor.\+h}}. For unfederated execution, the code generator generates an empty implementation. 

\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{reactor_8h_a39f588e1df453139dbb9a4157dda2027}\label{reactor_8h_a39f588e1df453139dbb9a4157dda2027}} 
\index{reactor.h@{reactor.h}!\_lf\_global\_time\_STP\_offset@{\_lf\_global\_time\_STP\_offset}}
\index{\_lf\_global\_time\_STP\_offset@{\_lf\_global\_time\_STP\_offset}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{\_lf\_global\_time\_STP\_offset}{\_lf\_global\_time\_STP\_offset}}
{\footnotesize\ttfamily \mbox{\hyperlink{tag_8h_a181bf532390385b9092615f354cccf87}{interval\+\_\+t}} \+\_\+lf\+\_\+global\+\_\+time\+\_\+\+S\+T\+P\+\_\+offset}

Global S\+TP offset uniformly applied to advancement of each time step in federated execution. This can be retrieved in user code by calling \mbox{\hyperlink{reactor_8h_a54be08fbc7990c2d8082a31cbbf6e019}{get\+\_\+stp\+\_\+offset()}} and adjusted by calling \mbox{\hyperlink{reactor_8h_a75a5bf324229d35fb88541a04449c95b}{set\+\_\+stp\+\_\+offset(interval\+\_\+t offset)}}. \mbox{\Hypertarget{reactor_8h_af74a2782bda0d66298d22d637ad964b5}\label{reactor_8h_af74a2782bda0d66298d22d637ad964b5}} 
\index{reactor.h@{reactor.h}!\_lf\_number\_of\_threads@{\_lf\_number\_of\_threads}}
\index{\_lf\_number\_of\_threads@{\_lf\_number\_of\_threads}!reactor.h@{reactor.h}}
\doxysubsubsection{\texorpdfstring{\_lf\_number\_of\_threads}{\_lf\_number\_of\_threads}}
{\footnotesize\ttfamily unsigned int \+\_\+lf\+\_\+number\+\_\+of\+\_\+threads}

The number of worker threads for threaded execution. By default, execution is not threaded and this variable will have value 0, meaning that the execution is not threaded. 